/*
 * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/
 *
 * Uses the built in easing capabilities added In jQuery 1.1
 * to offer multiple easing options
 *
 * TERMS OF USE - jQuery Easing
 * 
 * Open source under the BSD License. 
 * 
 * Copyright Â© 2008 George McGinley Smith
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without modification, 
 * are permitted provided that the following conditions are met:
 * 
 * Redistributions of source code must retain the above copyright notice, this list of 
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list 
 * of conditions and the following disclaimer in the documentation and/or other materials 
 * provided with the distribution.
 * 
 * Neither the name of the author nor the names of contributors may be used to endorse 
 * or promote products derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY 
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED 
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED 
 * OF THE POSSIBILITY OF SUCH DAMAGE. 
 *
*/
jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,i,n,a){return jQuery.easing[jQuery.easing.def](e,t,i,n,a)},easeInQuad:function(e,t,i,n,a){return n*(t/=a)*t+i},easeOutQuad:function(e,t,i,n,a){return-n*(t/=a)*(t-2)+i},easeInOutQuad:function(e,t,i,n,a){return(t/=a/2)<1?n/2*t*t+i:-n/2*(--t*(t-2)-1)+i},easeInCubic:function(e,t,i,n,a){return n*(t/=a)*t*t+i},easeOutCubic:function(e,t,i,n,a){return n*((t=t/a-1)*t*t+1)+i},easeInOutCubic:function(e,t,i,n,a){return(t/=a/2)<1?n/2*t*t*t+i:n/2*((t-=2)*t*t+2)+i},easeInQuart:function(e,t,i,n,a){return n*(t/=a)*t*t*t+i},easeOutQuart:function(e,t,i,n,a){return-n*((t=t/a-1)*t*t*t-1)+i},easeInOutQuart:function(e,t,i,n,a){return(t/=a/2)<1?n/2*t*t*t*t+i:-n/2*((t-=2)*t*t*t-2)+i},easeInQuint:function(e,t,i,n,a){return n*(t/=a)*t*t*t*t+i},easeOutQuint:function(e,t,i,n,a){return n*((t=t/a-1)*t*t*t*t+1)+i},easeInOutQuint:function(e,t,i,n,a){return(t/=a/2)<1?n/2*t*t*t*t*t+i:n/2*((t-=2)*t*t*t*t+2)+i},easeInSine:function(e,t,i,n,a){return-n*Math.cos(t/a*(Math.PI/2))+n+i},easeOutSine:function(e,t,i,n,a){return n*Math.sin(t/a*(Math.PI/2))+i},easeInOutSine:function(e,t,i,n,a){return-n/2*(Math.cos(Math.PI*t/a)-1)+i},easeInExpo:function(e,t,i,n,a){return 0==t?i:n*Math.pow(2,10*(t/a-1))+i},easeOutExpo:function(e,t,i,n,a){return t==a?i+n:n*(1-Math.pow(2,-10*t/a))+i},easeInOutExpo:function(e,t,i,n,a){return 0==t?i:t==a?i+n:(t/=a/2)<1?n/2*Math.pow(2,10*(t-1))+i:n/2*(2-Math.pow(2,-10*--t))+i},easeInCirc:function(e,t,i,n,a){return-n*(Math.sqrt(1-(t/=a)*t)-1)+i},easeOutCirc:function(e,t,i,n,a){return n*Math.sqrt(1-(t=t/a-1)*t)+i},easeInOutCirc:function(e,t,i,n,a){return(t/=a/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+i:n/2*(Math.sqrt(1-(t-=2)*t)+1)+i},easeInElastic:function(e,t,i,n,a){var s=1.70158,r=0,o=n;if(0==t)return i;if(1==(t/=a))return i+n;if(r||(r=.3*a),o<Math.abs(n)){o=n;var s=r/4}else var s=r/(2*Math.PI)*Math.asin(n/o);return-o*Math.pow(2,10*(t-=1))*Math.sin((t*a-s)*(2*Math.PI)/r)+i},easeOutElastic:function(e,t,i,n,a){var s=1.70158,r=0,o=n;if(0==t)return i;if(1==(t/=a))return i+n;if(r||(r=.3*a),o<Math.abs(n)){o=n;var s=r/4}else var s=r/(2*Math.PI)*Math.asin(n/o);return o*Math.pow(2,-10*t)*Math.sin((t*a-s)*(2*Math.PI)/r)+n+i},easeInOutElastic:function(e,t,i,n,a){var s=1.70158,r=0,o=n;if(0==t)return i;if(2==(t/=a/2))return i+n;if(r||(r=a*(.3*1.5)),o<Math.abs(n)){o=n;var s=r/4}else var s=r/(2*Math.PI)*Math.asin(n/o);return t<1?o*Math.pow(2,10*(t-=1))*Math.sin((t*a-s)*(2*Math.PI)/r)*-.5+i:o*Math.pow(2,-10*(t-=1))*Math.sin((t*a-s)*(2*Math.PI)/r)*.5+n+i},easeInBack:function(e,t,i,n,a,s){return s==undefined&&(s=1.70158),n*(t/=a)*t*((s+1)*t-s)+i},easeOutBack:function(e,t,i,n,a,s){return s==undefined&&(s=1.70158),n*((t=t/a-1)*t*((s+1)*t+s)+1)+i},easeInOutBack:function(e,t,i,n,a,s){return s==undefined&&(s=1.70158),(t/=a/2)<1?n/2*(t*t*((1+(s*=1.525))*t-s))+i:n/2*((t-=2)*t*((1+(s*=1.525))*t+s)+2)+i},easeInBounce:function(e,t,i,n,a){return n-jQuery.easing.easeOutBounce(e,a-t,0,n,a)+i},easeOutBounce:function(e,t,i,n,a){return(t/=a)<1/2.75?n*(7.5625*t*t)+i:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+i:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+i:n*(7.5625*(t-=2.625/2.75)*t+.984375)+i},easeInOutBounce:function(e,t,i,n,a){return t<a/2?.5*jQuery.easing.easeInBounce(e,2*t,0,n,a)+i:.5*jQuery.easing.easeOutBounce(e,2*t-a,0,n,a)+.5*n+i}});/*
* debouncedresize: special jQuery event that happens once after a window resize
*
* latest version and complete README available on Github:
* https://github.com/louisremi/jquery-smartresize/blob/master/jquery.debouncedresize.js
*
* Copyright 2011 @louis_remi
* Licensed under the MIT license.
*/
var $event=$.event,$special,resizeTimeout;$special=$event.special.debouncedresize={setup:function(){$(this).on("resize",$special.handler)},teardown:function(){$(this).off("resize",$special.handler)},handler:function(e,t){var i=this,n=arguments,a=function(){e.type="debouncedresize",$event.dispatch.apply(i,n)};resizeTimeout&&clearTimeout(resizeTimeout),t?a():resizeTimeout=setTimeout(a,$special.threshold)},threshold:250};var BLANK="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";$.fn.imagesLoaded=function(e){function t(){var t=$(h),i=$(u);a&&(u.length?a.reject(r,t,i):a.resolve(r)),$.isFunction(e)&&e.call(n,r,t,i)}function i(e,i){e.src!==BLANK&&-1===$.inArray(e,o)&&(o.push(e),i?u.push(e):h.push(e),$.data(e,"imagesLoaded",{isBroken:i,src:e.src}),s&&a.notifyWith($(e),[i,r,$(h),$(u)]),r.length===o.length&&(setTimeout(t),r.unbind(".imagesLoaded")))}var n=this,a=$.isFunction($.Deferred)?$.Deferred():0,s=$.isFunction(a.notify),r=n.find("img").add(n.filter("img")),o=[],h=[],u=[];return $.isPlainObject(e)&&$.each(e,function(t,i){"callback"===t?e=i:a&&a[t](i)}),r.length?r.bind("load.imagesLoaded error.imagesLoaded",function(e){i(e.target,"error"===e.type)}).each(function(e,t){var n=t.src,a=$.data(t,"imagesLoaded");return a&&a.src===n?void i(t,a.isBroken):t.complete&&t.naturalWidth!==undefined?void i(t,0===t.naturalWidth||0===t.naturalHeight):void((t.readyState||t.complete)&&(t.src=BLANK,t.src=n))}):t(),a?a.promise(n):n};var Grid=function(){function e(e){w=$.extend(!0,{},w,e),h.imagesLoaded(function(){t(!0),n(),i()})}function t(e){u.each(function(){var t=$(this);t.data("offsetTop",t.offset().top),e&&t.data("height",t.height())})}function i(){u.on("click","span.og-close",function(){return s(),!1}).children("a").on("click",function(){var e=$(this).parent();return c===e.index()?s():a(e),!1}),g.on("debouncedresize",function(){f=0,d=-1,t(),n(),void 0!==$.data(this,"preview")&&s()})}function n(){o={width:g.width(),height:g.height()}}function a(e){var t=$.data(this,"preview"),i=e.data("offsetTop");if(f=0,void 0!==t){if(d===i)return t.update(e),!1;i>d&&(f=t.height),s()}d=i,t=$.data(this,"preview",new r(e)),t.open()}function s(){c=-1,$.data(this,"preview").close(),$.removeData(this,"preview")}function r(e){this.$item=e,this.expandedIdx=this.$item.index(),this.create(),this.update()}var o,h=$("#og-grid"),u=h.children("li"),c=-1,d=-1,f=0,l=0,g=$(window),p=$("html, body"),v={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},m=v[Modernizr.prefixed("transition")],I=Modernizr.csstransitions,w={minHeight:500,speed:350,easing:"ease"};return r.prototype={create:function(){this.$title=$("<h3></h3>"),this.$description=$("<p></p>"),this.$href=$('<a href="#" class="btn btn-danger"></a>'),this.$details=$('<div class="og-details"></div>').append(this.$title,this.$description,this.$href),this.$loading=$('<div class="og-loading"></div>'),this.$fullimage=$('<div class="og-fullimg"></div>').append(this.$loading),this.$closePreview=$('<span class="og-close"></span>'),this.$previewInner=$('<div class="og-expander-inner"></div>').append(this.$closePreview,this.$fullimage,this.$details),this.$previewEl=$('<div class="og-expander"></div>').append(this.$previewInner),this.$item.append(this.getEl()),I&&this.setTransition()},update:function(e){if(e&&(this.$item=e),-1!==c){u.eq(c).removeClass("og-expanded"),this.$item.addClass("og-expanded"),this.positionPreview()}c=this.$item.index();var t=this.$item.children("a"),i={href:t.attr("href"),largesrc:t.data("largesrc"),title:t.data("title"),description:t.data("description"),link:t.data("link"),largesrcalt:t.data("largesrcalt")};this.$title.html(i.title),this.$description.html(i.description),this.$href.attr("href",i.href),this.$href.html(i.link);var n=this;"undefined"!=typeof n.$largeImg&&n.$largeImg.remove(),n.$fullimage.is(":visible")&&(this.$loading.show(),$("<img/>").load(function(){var e=$(this);e.attr("src")===n.$item.children("a").data("largesrc")&&(n.$loading.hide(),n.$fullimage.find("img").remove(),n.$largeImg=e.fadeIn(350),n.$fullimage.append(n.$largeImg))}).attr({src:i.largesrc,alt:i.largesrcalt}))},open:function(){setTimeout($.proxy(function(){this.setHeights(),this.positionPreview()},this),25)},close:function(){var e=this,t=function(){I&&$(this).off(m),e.$item.removeClass("og-expanded"),e.$previewEl.remove()};return setTimeout($.proxy(function(){"undefined"!=typeof this.$largeImg&&this.$largeImg.fadeOut("fast"),this.$previewEl.css("height",0);var e=u.eq(this.expandedIdx);e.css("height",e.data("height")).on(m,t),I||t.call()},this),25),!1},calcHeight:function(){var e=o.height-this.$item.data("height")-l,t=o.height;e<w.minHeight&&(e=w.minHeight,t=w.minHeight+this.$item.data("height")+l),this.height=e,this.itemHeight=t},setHeights:function(){var e=this,t=function(){I&&e.$item.off(m),e.$item.addClass("og-expanded")};this.calcHeight(),this.$previewEl.css("height",this.height),this.$item.css("height",this.itemHeight).on(m,t),I||t.call()},positionPreview:function(){var e=this.$item.data("offsetTop"),t=this.$previewEl.offset().top-f,i=this.height+this.$item.data("height")+l<=o.height?e:this.height<o.height?t-(o.height-this.height):t;p.animate({scrollTop:i},w.speed)},setTransition:function(){this.$previewEl.css("transition","height "+w.speed+"ms "+w.easing),this.$item.css("transition","height "+w.speed+"ms "+w.easing)},getEl:function(){return this.$previewEl}},{init:e}}();